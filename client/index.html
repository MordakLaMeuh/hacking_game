<!DOCTYPE html>
<html>
<head>
	<title>Mini Chat-Box</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="hacking_game">
	<meta name="author" content="team_banane">
	<link rel="shortcut icon" href="medias/ours.png">
	<style type="text/css">
		*	{
			padding: 0px;
			margin: 0px;
		}
		body 	{
			display: block;
			background:#FFFFFF;
			height:100vh;
			width: 100vw;
			position: fixed;
		}
		/* http://meyerweb.com/eric/tools/css/reset/
		   v2.0 | 20110126
		   License: none (public domain)
		*/

		html, body, div, span, applet, object, iframe,
		h1, h2, h3, h4, h5, h6, p, blockquote, pre,
		a, abbr, acronym, address, big, cite, code,
		del, dfn, em, img, ins, kbd, q, s, samp,
		small, strike, strong, sub, sup, tt, var,
		b, u, i, center,
		dl, dt, dd, ol, ul, li,
		fieldset, form, label, legend,
		table, caption, tbody, tfoot, thead, tr, th, td,
		article, aside, canvas, details, embed,
		figure, figcaption, footer, header, hgroup,
		menu, nav, output, ruby, section, summary,
		time, mark, audio, video {
			margin: 0;
			padding: 0;
			border: 0;
			font-size: 100%;
			font: inherit;
			vertical-align: baseline;
		}
		/* HTML5 display-role reset for older browsers */
		article, aside, details, figcaption, figure,
		footer, header, hgroup, menu, nav, section {
			display: block;
		}
		body {
			line-height: 1;
		}
		ol, ul {
			list-style: none;
		}
		blockquote, q {
			quotes: none;
		}
		blockquote:before, blockquote:after,
		q:before, q:after {
			content: '';
			content: none;
		}
		table {
			border-collapse: collapse;
			border-spacing: 0;
		}

		.noselect {
		  -webkit-touch-callout: none; /* iOS Safari */
		    -webkit-user-select: none; /* Safari */
		     -khtml-user-select: none; /* Konqueror HTML */
		       -moz-user-select: none; /* Firefox */
		        -ms-user-select: none; /* Internet Explorer/Edge */
		            user-select: none; /* Non-prefixed version, currently
		                                  supported by Chrome and Opera */
		}
	</style>

	<script type="text/javascript">
	{
		var link = document.createElement("link");
		var link2 = document.createElement("link");
		var link3 = document.createElement("link");
		var link4 = document.createElement("link");
		var link5 = document.createElement("link");
		var link6 = document.createElement("link");

		if (navigator.userAgent.match(/Android/i)
		|| navigator.userAgent.match(/webOS/i)
		|| navigator.userAgent.match(/iPhone/i)
		|| navigator.userAgent.match(/iPad/i)
		|| navigator.userAgent.match(/iPod/i)
		|| navigator.userAgent.match(/BlackBerry/i)
		|| navigator.userAgent.match(/Windows Phone/i)) {
			console.log("MOBILE CSS VERSION");
			link.href = "right_panel/right_panel_mobile.css";
			link2.href = "right_panel/dialog_mobile.css";
			link3.href = "right_panel/browser_mobile.css";
			link4.href = "right_panel/diary_mobile.css";
			link5.href = "right_panel/mail_mobile.css";
			link6.href = "tty/tty_mobile.css";
		} else {
			console.log("BROWSER CSS VERSION");
			link.href = "right_panel/right_panel.css";
			link2.href = "right_panel/dialog.css";
			link3.href = "right_panel/browser.css";
			link4.href = "right_panel/diary.css";
			link5.href = "right_panel/mail.css";
			link6.href = "tty/tty.css";
		}
		link.rel = "stylesheet";
		link2.rel = "stylesheet";
		link3.rel = "stylesheet";
		link4.rel = "stylesheet";
		link5.rel = "stylesheet";
		link6.rel = "stylesheet";

		link.media = "all";
		link2.media = "all";
		link3.media = "all";
		link4.media = "all";
		link5.media = "all";
		link6.media = "all";

		link.type = "text/css";
		link2.type = "text/css";
		link3.type = "text/css";
		link4.type = "text/css";
		link5.type = "text/css";
		link6.type = "text/css";

		var head = document.getElementsByTagName("head");
		head[0].appendChild(link);
		head[0].appendChild(link2);
		head[0].appendChild(link3);
		head[0].appendChild(link4);
		head[0].appendChild(link5);
		head[0].appendChild(link6);
	}
	</script>

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<script type="text/javascript">

/*
 * First we get the viewport height and we multiple it by 1% to get a value for a vh unit
 */
let vh = window.innerHeight * 0.01;
/*
 * Then we set the value in the --vh custom property to the root of the document
 */
document.documentElement.style.setProperty('--vh', `${vh}px`);

</script>

<body class="noselect">

<div id="right_panel">
	<div class="tab" id="tab">
		<ul id="tabUl">
			<li id="mail_btn" class="tablinks"><a href="#" ><i class="material-icons">email</i></a></li>
			<li id="browser_btn" class="tablinks"><a href="#" ><i class="material-icons">language</i></a></li>
			<li id="social_btn" class="tablinks"><a href="#" ><i class="material-icons">contact_phone</i></a></li>
			<li id="diary_btn" class="tablinks"><a href="#" ><i class="material-icons">event_note</i></a></li>
			<li id="tty_btn" class="tablinks"><a href="#" ><i class="material-icons">grade</i></a></li>
		</ul>
	</div>

	<div id="mail" class="tabcontent">

		<div id="mail-window-bar">
			<i></i><i></i><i></i>
		</div>
		<div id="mail_header">
				<input id="backBtn" type="submit" value="Back"/>
				<p id="mailName"></p>
				<input id="signInBtn" type="submit" value="Sign out"/>
		</div>
		<div id="mail_body">
				<ul id="mail_info_bar">
					<li>From</li>
					<li>To</li>
					<li>Subject</li>
				</ul>
				<ul id="mail_messages">
				</ul>
		</div>
		<form id="loginForm">
			<p id="errorForm">Invalid login or password</p>
			<div class="input-container">
				<i class="material-icons icon">email</i>
				<input id= "loginInput" class="input-field" type="text" placeholder="Login" spellcheck="false" autocapitalize="none">
			</div>
			<div class="input-container">
				<i class="material-icons icon">lock</i>
				<input id="passwordInput" class="input-field" type="text" placeholder="Password" spellcheck="false" autocapitalize="none">
			</div>
			<button id="loginBtn" class="btn" type="submit">Login</button>
		</form>
	</div>

	<div id="browser" class="tabcontent">
		<div class="browser-navigation-bar">
			<i></i><i></i><i></i>
		</div>
		<div class="url-bar">
		<input id="url" type="text" onfocus="this.value=''" spellcheck="false" autocorrect="off" autocapitalize="none" name="url" value="enter your URL" />
			<input id="go_btn" type="submit" value="Go" />
		</div>
		<div class="browser-container" id="browser-container">
			<img src="medias/macaron.jpg" id="bwr_img" alt="browser content">
		</div>
	</div>

	<div id="social" class="tabcontent">
		<div class="messenger" id="contacts_list"></div>
	</div>

	<div id="diary" class="tabcontent">
		<div class="futurepanel_header">
			<h1 class="futurepanel_title">My diary</h1>
		</div>
		<div class="futurepanel_body" id="diary_body">
		</div>
	</div>
</div>

<div id="js_tty">

</div>

<script type="text/javascript">

var mousewheelevt=(/Firefox/i.test(navigator.userAgent)) ? "DOMMouseScroll" : "mousewheel"

</script>

<script src="tty/tty.js"></script>
<script src="right_panel/right_panel.js"></script>
<script src="right_panel/social.js"></script>
<script src="right_panel/diary.js"></script>
<script src="right_panel/browser.js"></script>
<script src="right_panel/mail.js"></script>

<script>
var socket  = new WebSocket('ws://localhost:8081');
var tty = new TTY();
var right_panel = new RIGHT_PANEL(tty.displayCursor);
var social = new SOCIAL(right_panel.notif_button_cb);
var diary = new DIARY(right_panel.notif_button_cb);
var browser = new BROWSER(tty.key_cb);
var mail = new MAIL(tty.key_cb);

window.onload = right_panel.resizeScreen;
window.onresize = right_panel.resizeScreen;

socket.onmessage = function (res){
	data = JSON.parse(res.data);
	console.log(data);
	if (data.socialContacts) {
		social.displayContacts(data.socialContacts);
		console.log(data.socialContacts);
	}
	if (data.social) {
		console.log(data.social);
		social.addEntry(data.social);
		if (data.social.s)
			diary.addEntry(data.social.s[0], data.social.s[1]);
		return ;
	}
	if (data.diary)
		diary.addEntry(data.diary[0], data.diary[1]);
	if (data.tty)
		tty.onmessage(data.tty);
	if (data.mail) {
		if (data.mail.s)
			diary.addEntry(data.mail.s[0], data.mail.s[1]);
		else
			mail.login(data.mail);
	}
}
</script>

<script>

</script>
</body>
</html>
